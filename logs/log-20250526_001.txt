2025-05-26 15:06:24.962 +03:00 [DBG] Entity Framework Core 9.0.5 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.5' with options: EngineType=SqlServer 
2025-05-26 15:06:24.983 +03:00 [DBG] Creating DbConnection.
2025-05-26 15:06:24.983 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-26 15:06:24.987 +03:00 [DBG] Opening connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:25.102 +03:00 [DBG] Opened connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:25.103 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:25.106 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-05-26 15:06:25.107 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2025-05-26 15:06:25.110 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-26 15:06:25.122 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-26 15:06:25.123 +03:00 [DBG] Closing connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:25.125 +03:00 [DBG] Closed connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD' (1ms).
2025-05-26 15:06:25.137 +03:00 [DBG] Creating DbConnection.
2025-05-26 15:06:25.137 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-26 15:06:25.138 +03:00 [DBG] Opening connection to database 'master' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:25.141 +03:00 [DBG] Opened connection to database 'master' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:25.141 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:25.142 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:25.142 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:25.142 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [ProjectDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-05-26 15:06:25.177 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [ProjectDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-05-26 15:06:25.177 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:25.178 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:25.178 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:25.178 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [ProjectDB];
2025-05-26 15:06:25.252 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [ProjectDB];
2025-05-26 15:06:25.252 +03:00 [DBG] Closing connection to database 'master' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:25.252 +03:00 [DBG] Closed connection to database 'master' on server 'DESKTOP-SSNMLFD' (0ms).
2025-05-26 15:06:25.252 +03:00 [DBG] Disposing connection to database 'master' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:25.252 +03:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-26 15:06:25.253 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-26 15:06:25.253 +03:00 [DBG] Disposing connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:25.253 +03:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-26 15:06:31.741 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-26 15:06:32.084 +03:00 [DBG] Entity Framework Core 9.0.5 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.5' with options: EngineType=SqlServer 
2025-05-26 15:06:32.288 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-26 15:06:48.627 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-26 15:06:48.949 +03:00 [DBG] Entity Framework Core 9.0.5 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.5' with options: EngineType=SqlServer 
2025-05-26 15:06:49.014 +03:00 [DBG] Creating DbConnection.
2025-05-26 15:06:49.034 +03:00 [DBG] Created DbConnection. (18ms).
2025-05-26 15:06:49.036 +03:00 [DBG] Migrating using database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.039 +03:00 [DBG] Opening connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.135 +03:00 [DBG] An error occurred using the connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.148 +03:00 [DBG] Creating DbConnection.
2025-05-26 15:06:49.148 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-26 15:06:49.148 +03:00 [DBG] Opening connection to database 'master' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.160 +03:00 [DBG] Opened connection to database 'master' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.163 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:49.167 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2025-05-26 15:06:49.168 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (5ms).
2025-05-26 15:06:49.171 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [ProjectDB];
2025-05-26 15:06:49.644 +03:00 [INF] Executed DbCommand (471ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [ProjectDB];
2025-05-26 15:06:49.645 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:49.645 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.645 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.645 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [ProjectDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-05-26 15:06:49.865 +03:00 [INF] Executed DbCommand (220ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [ProjectDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-05-26 15:06:49.866 +03:00 [DBG] Closing connection to database 'master' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.872 +03:00 [DBG] Closed connection to database 'master' on server 'DESKTOP-SSNMLFD' (4ms).
2025-05-26 15:06:49.874 +03:00 [DBG] Disposing connection to database 'master' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.874 +03:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-26 15:06:49.874 +03:00 [DBG] Opening connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.883 +03:00 [DBG] Opened connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.883 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:49.884 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.884 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.884 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-26 15:06:49.889 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-26 15:06:49.889 +03:00 [DBG] Closing connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.889 +03:00 [DBG] Closed connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD' (0ms).
2025-05-26 15:06:49.889 +03:00 [DBG] Opening connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.889 +03:00 [DBG] Opened connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.890 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-05-26 15:06:49.891 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-05-26 15:06:49.891 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-05-26 15:06:49.891 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-05-26 15:06:49.891 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-05-26 15:06:49.916 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-05-26 15:06:49.941 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-26 15:06:49.944 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-26 15:06:49.944 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:49.944 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.945 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.945 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-05-26 15:06:49.955 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-05-26 15:06:49.956 +03:00 [DBG] Committing transaction.
2025-05-26 15:06:49.959 +03:00 [DBG] Committed transaction.
2025-05-26 15:06:49.959 +03:00 [DBG] Disposing transaction.
2025-05-26 15:06:49.960 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-05-26 15:06:49.961 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-05-26 15:06:49.961 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:49.961 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.961 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.962 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-26 15:06:49.962 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-26 15:06:49.963 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-05-26 15:06:49.963 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-05-26 15:06:49.963 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-05-26 15:06:49.963 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-26 15:06:49.964 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-26 15:06:49.964 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-26 15:06:49.964 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-05-26 15:06:49.964 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-05-26 15:06:49.965 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-26 15:06:49.976 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-26 15:06:49.977 +03:00 [DBG] Closing data reader to 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:49.978 +03:00 [DBG] A data reader for 'ProjectDB' on server 'DESKTOP-SSNMLFD' is being disposed after spending 0ms reading results.
2025-05-26 15:06:49.982 +03:00 [INF] Applying migration '20250526115032_InitialCreate'.
2025-05-26 15:06:49.990 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:49.990 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.990 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.990 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Address] nvarchar(max) NULL,
    [BirthDate] date NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2025-05-26 15:06:49.993 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Authors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Address] nvarchar(max) NULL,
    [BirthDate] date NOT NULL,
    CONSTRAINT [PK_Authors] PRIMARY KEY ([Id])
);
2025-05-26 15:06:49.994 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:49.994 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.994 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.994 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [Author] nvarchar(max) NULL,
    [AuthorId] int NOT NULL,
    [Price] float NOT NULL,
    [Date] date NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Authors_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE
);
2025-05-26 15:06:49.997 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Books] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [Author] nvarchar(max) NULL,
    [AuthorId] int NOT NULL,
    [Price] float NOT NULL,
    [Date] date NOT NULL,
    CONSTRAINT [PK_Books] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Books_Authors_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE
);
2025-05-26 15:06:49.998 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:49.998 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.998 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:49.998 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Books_AuthorId] ON [Books] ([AuthorId]);
2025-05-26 15:06:50.000 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Books_AuthorId] ON [Books] ([AuthorId]);
2025-05-26 15:06:50.000 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.000 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.000 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.000 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250526115032_InitialCreate', N'9.0.5');
2025-05-26 15:06:50.006 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250526115032_InitialCreate', N'9.0.5');
2025-05-26 15:06:50.006 +03:00 [INF] Applying migration '20250526115628_NewMigrationName'.
2025-05-26 15:06:50.017 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.017 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.017 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.017 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Books] DROP CONSTRAINT [FK_Books_Authors_AuthorId];
2025-05-26 15:06:50.022 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Books] DROP CONSTRAINT [FK_Books_Authors_AuthorId];
2025-05-26 15:06:50.022 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.022 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.022 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.022 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Books]') AND [c].[name] = N'Author');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Books] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Books] DROP COLUMN [Author];
2025-05-26 15:06:50.107 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Books]') AND [c].[name] = N'Author');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Books] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Books] DROP COLUMN [Author];
2025-05-26 15:06:50.107 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.107 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.107 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.107 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Authors].[role]', N'Role', 'COLUMN';
2025-05-26 15:06:50.556 +03:00 [INF] Executed DbCommand (449ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Authors].[role]', N'Role', 'COLUMN';
2025-05-26 15:06:50.556 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.556 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.556 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.557 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Books]') AND [c].[name] = N'Name');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Books] DROP CONSTRAINT [' + @var1 + '];');
UPDATE [Books] SET [Name] = N'' WHERE [Name] IS NULL;
ALTER TABLE [Books] ALTER COLUMN [Name] nvarchar(200) NOT NULL;
ALTER TABLE [Books] ADD DEFAULT N'' FOR [Name];
2025-05-26 15:06:50.592 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Books]') AND [c].[name] = N'Name');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Books] DROP CONSTRAINT [' + @var1 + '];');
UPDATE [Books] SET [Name] = N'' WHERE [Name] IS NULL;
ALTER TABLE [Books] ALTER COLUMN [Name] nvarchar(200) NOT NULL;
ALTER TABLE [Books] ADD DEFAULT N'' FOR [Name];
2025-05-26 15:06:50.592 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.592 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.592 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.592 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Authors]') AND [c].[name] = N'Name');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Authors] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Authors] ALTER COLUMN [Name] nvarchar(100) NOT NULL;
2025-05-26 15:06:50.626 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Authors]') AND [c].[name] = N'Name');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Authors] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Authors] ALTER COLUMN [Name] nvarchar(100) NOT NULL;
2025-05-26 15:06:50.626 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.626 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.626 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.626 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Author] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Address] nvarchar(max) NULL,
    [BirthDate] date NOT NULL,
    CONSTRAINT [PK_Author] PRIMARY KEY ([Id])
);
2025-05-26 15:06:50.629 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Author] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Address] nvarchar(max) NULL,
    [BirthDate] date NOT NULL,
    CONSTRAINT [PK_Author] PRIMARY KEY ([Id])
);
2025-05-26 15:06:50.629 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.629 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.629 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.629 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Book] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [Author] nvarchar(max) NULL,
    [AuthorId] int NOT NULL,
    [Price] float NOT NULL,
    [Date] date NOT NULL,
    CONSTRAINT [PK_Book] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Book_Author_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Author] ([Id]) ON DELETE CASCADE
);
2025-05-26 15:06:50.633 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Book] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [Author] nvarchar(max) NULL,
    [AuthorId] int NOT NULL,
    [Price] float NOT NULL,
    [Date] date NOT NULL,
    CONSTRAINT [PK_Book] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Book_Author_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Author] ([Id]) ON DELETE CASCADE
);
2025-05-26 15:06:50.633 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.633 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.633 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.633 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Book_AuthorId] ON [Book] ([AuthorId]);
2025-05-26 15:06:50.635 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Book_AuthorId] ON [Book] ([AuthorId]);
2025-05-26 15:06:50.635 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.635 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.635 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.635 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Books] ADD CONSTRAINT [FK_Books_Author_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Author] ([Id]) ON DELETE CASCADE;
2025-05-26 15:06:50.637 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Books] ADD CONSTRAINT [FK_Books_Author_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Author] ([Id]) ON DELETE CASCADE;
2025-05-26 15:06:50.637 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.637 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.637 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.637 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250526115628_NewMigrationName', N'9.0.5');
2025-05-26 15:06:50.638 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250526115628_NewMigrationName', N'9.0.5');
2025-05-26 15:06:50.638 +03:00 [INF] Applying migration '20250526120320_UpdateSchema'.
2025-05-26 15:06:50.644 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.644 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.644 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.644 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Book];
2025-05-26 15:06:50.648 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [Book];
2025-05-26 15:06:50.648 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.648 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.648 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.648 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Books] ADD CONSTRAINT [FK_Books_Authors_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE;
2025-05-26 15:06:50.650 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Books] ADD CONSTRAINT [FK_Books_Authors_AuthorId] FOREIGN KEY ([AuthorId]) REFERENCES [Authors] ([Id]) ON DELETE CASCADE;
2025-05-26 15:06:50.650 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-05-26 15:06:50.650 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.650 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-05-26 15:06:50.650 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250526120320_UpdateSchema', N'9.0.5');
2025-05-26 15:06:50.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250526120320_UpdateSchema', N'9.0.5');
2025-05-26 15:06:50.652 +03:00 [DBG] Committing transaction.
2025-05-26 15:06:50.653 +03:00 [DBG] Committed transaction.
2025-05-26 15:06:50.653 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-05-26 15:06:50.653 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-05-26 15:06:50.653 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-05-26 15:06:50.653 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-05-26 15:06:50.658 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-05-26 15:06:50.658 +03:00 [DBG] Disposing transaction.
2025-05-26 15:06:50.658 +03:00 [DBG] Closing connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:50.659 +03:00 [DBG] Closed connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD' (0ms).
2025-05-26 15:06:50.660 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-26 15:06:50.660 +03:00 [DBG] Disposing connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:06:50.660 +03:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-05-26 15:08:47.037 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-26 15:08:47.352 +03:00 [DBG] Entity Framework Core 9.0.5 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.5' with options: EngineType=SqlServer 
2025-05-26 15:08:47.355 +03:00 [DBG] Creating DbConnection.
2025-05-26 15:08:47.375 +03:00 [DBG] Created DbConnection. (18ms).
2025-05-26 15:08:47.378 +03:00 [DBG] 'AppDbContext' disposed.
2025-05-26 15:08:47.382 +03:00 [DBG] Disposing connection to database 'ProjectDB' on server 'DESKTOP-SSNMLFD'.
2025-05-26 15:08:47.385 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
